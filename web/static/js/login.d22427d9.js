(window.webpackJsonp=window.webpackJsonp||[]).push([["login"],{"0578":function(t,e,a){},1146:function(t,e,n){"use strict";n.r(e);n("57e7"),n("a481"),n("c5f6");var a,i=n("bd86"),l=(n("ac1e"),n("543e")),r=(n("bda7"),n("5e46")),o=(n("da3c"),n("0b33")),c=(n("e7e5"),n("d399")),s=(n("a52c"),n("2ed4")),u=(n("7f7f"),n("537a"),n("ac28")),d=n("c24f"),v=n("1a9b"),f=n.n(v),p=(n("a715"),window.wx),g={name:"Recognition",components:(a={},Object(i.a)(a,u.a.name,u.a),Object(i.a)(a,s.a.name,s.a),Object(i.a)(a,c.a.name,c.a),Object(i.a)(a,o.a.name,o.a),Object(i.a)(a,r.a.name,r.a),Object(i.a)(a,l.a.name,l.a),Object(i.a)(a,"VoPages",f.a),a),data:function(){return{listQuery:{key:"",page:1,limit:100,endDate:"",appletSource:"",startDate:"",expandManager:"",clueType:"",carType:"",isSettledIn:"",workCity:"",sourceType:"",isPayDeposit:"",state:"1"},btnShow:!1,active:1,list:[],total:0,page:1,loadedAll:!1}},mounted:function(){this.getUserConfig()},methods:{getUserConfig:function(){var n=this,a=window.location.href;Object(d.f)({url:a}).then(function(t){if(t.data.success){var e=t.data.data;p.config({beta:!0,debug:!1,appId:e.corpId,timestamp:Number(e.timestamp),nonceStr:e.nonceStr,signature:e.signature,jsApiList:["agentConfig"]}),p.ready(function(){p.checkJsApi({jsApiList:["agentConfig","sendChatMessage","getCurExternalContact"],success:function(){Object(d.e)({agentId:"1000013",url:a}).then(function(t){if(t.data.success){var e=t.data.data;p.agentConfig({corpid:e.corpId,agentid:e.agentId,timestamp:""+e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["sendChatMessage","getCurExternalContact"],success:function(){p.invoke("getCurExternalContact",{},function(t){"getCurExternalContact:ok"===t.err_msg?(localStorage.setItem("externalUserId",t.userId),Object(d.d)(t.userId).then(function(t){if(t.data.success)if(t.data.data.matchSuccess){var e=t.data.data.driverType,a=t.data.data.driverId;1===e?n.$router.replace({path:"/driverDetail",query:{driverId:a}}):2===e?n.$router.replace({path:"/clueDetail",query:{clueId:a}}):n.$router.replace({path:"/unrecognition"})}else n.$router.replace({path:"/unrecognition"})})):this.btnShow=!0})},fail:function(t){-1<t.errMsg.indexOf("is not a function")&&alert('<i class="weui-icon-warn">版本过低请升级333</i>')}})}})},fail:function(){alert("版本过低请升级2")}})}),p.error(function(t){})}})}}},h=(n("be95"),n("2877")),m=Object(h.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recognition"},[a("vo-pages",{attrs:{data:t.list,"loaded-all":t.loadedAll,"no-data-hint":!1}},[a("img",{attrs:{src:n("ef42"),alt:""}}),t._v(" "),a("div",[t.btnShow?t._e():a("van-loading"),t._v(" "),t.btnShow?t._e():a("div",{staticClass:"font"},[t._v("\n        正在识别联系人信息...\n      ")]),t._v(" "),t.btnShow?a("div",{staticClass:"font"},[t._v("\n        识别不到该用户\n      ")]):t._e()],1)])],1)},[],!1,null,"51685cf9",null);e.default=m.exports},1525:function(t,e,a){"use strict";var n=a("0578");a.n(n).a},"2fcb":function(t,e,a){},"43dd":function(t,e,a){},"4c5b":function(t,e,a){"use strict";var n=a("61d6");a.n(n).a},"5eef":function(t,e,n){"use strict";n.r(e);n("57e7"),n("c5f6"),n("a481");var a,i=n("bd86"),l=(n("0653"),n("34e9")),r=(n("66b9"),n("b650")),o=(n("be7f"),n("565f")),c=(n("8a58"),n("e41f")),s=(n("c194"),n("7744")),u=(n("e7e5"),n("d399")),d=(n("a52c"),n("2ed4")),v=(n("7f7f"),n("537a"),n("ac28")),f=n("c24f"),p=n("1a9b"),g=n.n(p),h=(n("a715"),window.wx),m={name:"Unrecognition",components:(a={},Object(i.a)(a,v.a.name,v.a),Object(i.a)(a,d.a.name,d.a),Object(i.a)(a,u.a.name,u.a),Object(i.a)(a,s.a.name,s.a),Object(i.a)(a,c.a.name,c.a),Object(i.a)(a,o.a.name,o.a),Object(i.a)(a,r.a.name,r.a),Object(i.a)(a,l.a.name,l.a),Object(i.a)(a,"VoPages",g.a),a),data:function(){return{active:1,list:[],total:0,page:1,phone:"",show:!1}},mounted:function(){},methods:{submitPhone:function(){var n=this,i=this;if(!/^1[3456789]\d{9}$/.test(i.phone))return u.a.fail("手机号码有误，请重填"),!1;var t=localStorage.getItem("externalUserId");if(t)Object(f.h)({externalUserId:t,phone:i.phone}).then(function(t){if(t.data.success)if(t.data.data.matchSuccess){var e=t.data.data.driverId,a=t.data.data.driverType;n.$router.replace({path:"/checkrecognition",query:{driverId:e,driverType:a}})}else u.a.fail("暂未匹配到客户信息");else u.a.fail(t.data.errorMsg)});else{var a=window.location.href;Object(f.f)({url:a}).then(function(t){if(t.data.success){var e=t.data.data;h.config({beta:!0,debug:!1,appId:e.corpId,timestamp:Number(e.timestamp),nonceStr:e.nonceStr,signature:e.signature,jsApiList:["agentConfig"]}),h.ready(function(){h.checkJsApi({jsApiList:["agentConfig","sendChatMessage","getCurExternalContact"],success:function(){Object(f.e)({agentId:"1000013",url:a}).then(function(t){if(t.data.success){var e=t.data.data;h.agentConfig({corpid:e.corpId,agentid:e.agentId,timestamp:""+e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["sendChatMessage","getCurExternalContact"],success:function(){h.invoke("getCurExternalContact",{},function(t){var a=this;"getCurExternalContact:ok"===t.err_msg?(localStorage.setItem("externalUserId",t.userId),Object(f.h)({externalUserId:t.userId,phone:i.phone}).then(function(t){if(t.data.success)if(t.data.data.matchSuccess){var e=t.data.data.driverId;a.$router.replace({path:"/checkrecognition",query:{driverId:e}})}else u.a.fail("暂未匹配到客户信息");else u.a.fail(t.data.errorMsg)})):u.a.fail("无法识别外部联系人")})},fail:function(t){-1<t.errMsg.indexOf("is not a function")&&alert("版本过低请升级")}})}})},fail:function(){alert("版本过低请升级2")}})}),h.error(function(t){})}})}}}},b=(n("4c5b"),n("2877")),_=Object(b.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"unrecognition"},[a("vo-pages",{attrs:{data:[],"no-data-hint":!1}},[a("img",{attrs:{src:n("621d"),alt:""}}),e._v(" "),a("div",{staticClass:"font"},[a("p",[e._v("未匹配客户信息")]),e._v(" "),a("p",[e._v("请完善客户信息")])]),e._v(" "),a("van-cell-group",{staticClass:"input_border"},[a("van-field",{attrs:{type:"tel",label:"手机号",placeholder:"请输入手机号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),a("van-button",{attrs:{type:"info",block:""},on:{click:e.submitPhone}},[e._v("\n      尝试匹配\n    ")])],1)],1)},[],!1,null,"7f93b286",null);e.default=_.exports},"61d6":function(t,e,a){},"621d":function(t,e,a){t.exports=a.p+"static/img/unrecognition.34a8ca52.png"},6373:function(t,e,a){"use strict";a.r(e);a("a481");var i,n=a("bd86"),l=(a("66b9"),a("b650")),r=(a("0653"),a("34e9")),o=(a("c194"),a("7744")),c=(a("bda7"),a("5e46")),s=(a("da3c"),a("0b33")),u=(a("e7e5"),a("d399")),d=(a("68ef"),a("a71a"),a("9d70"),a("3743"),a("4d75"),a("e3b3"),a("bc1b"),a("2fcb"),a("c31d")),v=a("8bbf"),f=a.n(v),p=a("d282"),g=a("ea8e"),h=a("b1d2"),m=a("6605"),b=Object(p.a)("dialog"),_=b[0],y=b[1],C=b[2],O=_({mixins:[Object(m.a)()],props:{title:String,width:[Number,String],message:String,className:null,callback:Function,beforeClose:Function,messageAlign:String,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showCancelButton:Boolean,transition:{type:String,default:"van-dialog-bounce"},showConfirmButton:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{onClickOverlay:function(){this.handleAction("overlay")},handleAction:function(e){var a=this;this.$emit(e),this.value&&(this.beforeClose?(this.loading[e]=!0,this.beforeClose(e,function(t){!1!==t&&a.loading[e]&&a.onClose(e),a.loading.confirm=!1,a.loading.cancel=!1})):this.onClose(e))},onClose:function(t){this.close(),this.callback&&this.callback(t)},onOpened:function(){this.$emit("opened")},onClosed:function(){this.$emit("closed")},genButtons:function(){var t,e=this,a=this.$createElement,n=this.showCancelButton&&this.showConfirmButton;return a("div",{class:[h.c,y("footer",{buttons:n})]},[this.showCancelButton&&a(l.a,{attrs:{size:"large",loading:this.loading.cancel,text:this.cancelButtonText||C("cancel")},class:y("cancel"),style:{color:this.cancelButtonColor},on:{click:function(){e.handleAction("cancel")}}}),this.showConfirmButton&&a(l.a,{attrs:{size:"large",loading:this.loading.confirm,text:this.confirmButtonText||C("confirm")},class:[y("confirm"),((t={})[h.a]=n,t)],style:{color:this.confirmButtonColor},on:{click:function(){e.handleAction("confirm")}}})])}},render:function(t){var e,a=t;if(this.shouldRender){var n=this.message,i=this.messageAlign,l=this.slots(),r=this.slots("title")||this.title,o=r&&a("div",{class:y("header",{isolated:!n&&!l})},[r]),c=(l||n)&&a("div",{class:y("content")},[l||a("div",{domProps:{innerHTML:n},class:y("message",((e={"has-title":r})[i]=i,e))})]);return a("transition",{attrs:{name:this.transition},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[a("div",{directives:[{name:"show",value:this.value}],attrs:{role:"dialog","aria-labelledby":this.title||n},class:[y(),this.className],style:{width:Object(g.a)(this.width)}},[o,c,this.genButtons()])])}}}),I=a("a142");function w(n){return I.f?Promise.resolve():new Promise(function(t,e){var a;i&&(a=i.$el,document.body.contains(a))||(i&&i.$destroy(),(i=new(f.a.extend(O))({el:document.createElement("div"),propsData:{lazyRender:!1}})).$on("input",function(t){i.value=t})),Object(d.a)(i,w.currentOptions,n,{resolve:t,reject:e})})}w.defaultOptions={value:!0,title:"",width:"",message:"",overlay:!0,className:"",lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:null,messageAlign:"",getContainer:"body",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!1,closeOnClickOverlay:!1,callback:function(t){i["confirm"===t?"resolve":"reject"](t)}},(w.alert=w).confirm=function(t){return w(Object(d.a)({showCancelButton:!0},t))},w.close=function(){i&&(i.value=!1)},w.setDefaultOptions=function(t){Object(d.a)(w.currentOptions,t)},(w.resetDefaultOptions=function(){w.currentOptions=Object(d.a)({},w.defaultOptions)})(),w.install=function(){f.a.use(O)},w.Component=O;var j,N=f.a.prototype.$dialog=w,k=(a("a52c"),a("2ed4")),S=(a("7f7f"),a("537a"),a("ac28")),x=a("c24f"),D=(a("a715"),{name:"Checkrecognition",components:(j={},Object(n.a)(j,S.a.name,S.a),Object(n.a)(j,k.a.name,k.a),Object(n.a)(j,N.name,N),Object(n.a)(j,u.a.name,u.a),Object(n.a)(j,s.a.name,s.a),Object(n.a)(j,c.a.name,c.a),Object(n.a)(j,o.a.name,o.a),Object(n.a)(j,r.a.name,r.a),Object(n.a)(j,l.a.name,l.a),j),data:function(){return{listQuery:{state:0},active:1,clueLog:[],orderList:[],lineList:[],cost:[],total:0,page:1,loadedAll:!1,driverId:"",driverType:"1",detail:""}},mounted:function(){var t=this,e=this.$route.query.driverId;this.driverId=e;var a=this.$route.query.driverType;this.driverType=a;var n=localStorage.getItem("externalUserId");e&&n&&a?this.getDetail(e,n,a):N.alert({message:"匹配不到用户"}).then(function(){t.$router.replace({path:"/"})})},methods:{checkPush:function(){var e=this,a=this,t=localStorage.getItem("externalUserId");Object(x.i)({driverId:a.driverId,driverType:a.driverType,externalUserId:t}).then(function(t){t.data.success&&(1===a.driverType?e.$router.replace({path:"/driverdetail",query:{driverId:a.driverId}}):e.$router.replace({path:"/cluedetail",query:{driverId:a.driverId}}))})},getDetail:function(t,e,a){var n=this;1===a?(Object(x.c)({driverId:t}).then(function(t){t.data.success&&(n.detail=t.data.data)}),Object(x.j)({driverId:t}).then(function(t){t.data.success&&(n.orderList=t.data.data)}),Object(x.k)({driverId:t}).then(function(t){t.data.success&&(n.lineList=t.data.data.lineTenderInformationVOS)})):(Object(x.a)({clueId:t}).then(function(t){t.data.success&&(n.detail=t.data.data)}),Object(x.b)({clueId:t}).then(function(t){t.data.success&&(n.clueLog=t.data.data)}))}}}),T=(a("d72c"),a("2877")),$=Object(T.a)(D,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"checkrecognition"},[a("div",{staticClass:"list-wrap"},[a("van-tabs",{attrs:{color:"#3986CB",sticky:""},model:{value:e.listQuery.state,callback:function(t){e.$set(e.listQuery,"state",t)},expression:"listQuery.state"}},[1===e.driverType?a("van-tab",{attrs:{title:"基本"}},["{}"!=JSON.stringify(e.detail)?a("van-cell-group",[a("h2",{staticClass:"van-doc-demo-block__title"},[e._v("\n            基本信息\n          ")]),e._v(" "),a("van-cell",{attrs:{title:"姓名",value:e._f("DataIsNull")(e.detail.name)}}),e._v(" "),a("van-cell",{attrs:{title:"身份证号",value:e._f("DataIsNull")(e.detail.idNumber)}}),e._v(" "),a("van-cell",{attrs:{title:"联系电话",value:e._f("DataIsNull")(e.detail.phone)}}),e._v(" "),a("van-cell",{attrs:{title:"司机编号",value:e._f("DataIsNull")(e.detail.driverId)}}),e._v(" "),a("van-cell",{attrs:{title:"工作城市",value:e._f("DataIsNull")(e.detail.workCityName)}}),e._v(" "),a("van-cell",{attrs:{title:"户籍地址",value:e._f("DataIsNull")(e.detail.cityName+e.detail.provinceName)}}),e._v(" "),a("van-cell",{attrs:{title:"面试时间",value:e._f("DataIsNull")(e.detail.interviewTime)}}),e._v(" "),a("van-cell",{attrs:{title:"货物经验",value:e._f("DataIsNull")(e.detail.cargoTypeName)}}),e._v(" "),a("van-cell",{attrs:{title:"物流从业经验",value:e._f("DataIsNull")(e.detail.workExperienceName)}}),e._v(" "),a("van-cell",{attrs:{title:"可接受一天工作时长",value:e._f("DataIsNull")(e.detail.workHourName)}}),e._v(" "),a("van-cell",{attrs:{title:"意向车型",value:e._f("DataIsNull")(e.detail.carTypeName)}}),e._v(" "),a("van-cell",{attrs:{title:"是否有在还贷款",value:2===e.detail.isHaveLoan?"否":"是"}}),e._v(" "),a("van-cell",{attrs:{title:"期望月收入",value:e._f("DataIsNull")(e.detail.expMonthlyIncomeName)}}),e._v(" "),a("van-cell",{attrs:{title:"司机年龄",value:e._f("DataIsNull")(e.detail.age)}}),e._v(" "),a("van-cell",{attrs:{title:"可接受首付范围",value:e._f("DataIsNull")(e.detail.acceptPayRangeName)}}),e._v(" "),a("van-cell",{attrs:{title:"现居住地址",value:e._f("DataIsNull")(e.detail.address)}}),e._v(" "),a("van-cell",{attrs:{title:"之前在哪工作",value:e._f("DataIsNull")(e.detail.whereWorked)}}),e._v(" "),a("van-cell",{attrs:{title:"来源渠道",value:e._f("DataIsNull")(e.detail.sourceName)}}),e._v(" "),a("van-cell",{attrs:{title:"征信是否通过",value:2===e.detail.isCreditPass?"否":"是"}}),e._v(" "),a("van-cell",{attrs:{title:"是否跟车",value:2===e.detail.isPay?"否":"是"}}),e._v(" "),a("van-cell",{attrs:{title:"意向金缴纳日期",value:e._f("DataIsNull")(e.detail.payDate)}}),e._v(" "),a("van-cell",{attrs:{title:"上岗时间",value:e._f("DataIsNull")(e.detail.goToWorkTime)}}),e._v(" "),a("van-cell",{attrs:{title:"平均月收入",value:e._f("DataIsNull")(e.detail.monthlyIncome)}}),e._v(" "),a("van-cell",{attrs:{title:"户口类型",value:e._f("DataIsNull")(e.detail.accountType)}}),e._v(" "),a("van-cell",{attrs:{title:"家里几个孩子",value:e._f("DataIsNull")(e.detail.childrenNum)}}),e._v(" "),a("van-cell",{attrs:{title:"孩子的平均年龄",value:e._f("DataIsNull")(e.detail.childrenAge)}}),e._v(" "),a("van-cell",{attrs:{title:"是否有货车",value:2===e.detail.isHaveCar?"否":"是"}}),e._v(" "),a("van-cell",{attrs:{title:"征信是否通过",value:2===e.detail.isCreditPass?"否":"是"}})],1):e._e(),e._v(" "),"{}"==JSON.stringify(e.detail)?a("p",{staticClass:"noMore"},[e._v("\n          暂无信息\n        ")]):e._e()],1):e._e(),e._v(" "),2===e.driverType?a("van-tab",{attrs:{title:"基本"}},["{}"!=JSON.stringify(e.detail)?a("van-cell-group",[a("h2",{staticClass:"van-doc-demo-block__title"},[e._v("\n            基本信息\n          ")]),e._v(" "),a("van-cell",{attrs:{title:"姓名",value:e._f("DataIsNull")(e.detail.name)}}),e._v(" "),a("van-cell",{attrs:{title:"联系电话",value:e._f("DataIsNull")(e.detail.phone)}}),e._v(" "),a("van-cell",{attrs:{title:"来源渠道",value:e._f("DataIsNull")(e.detail.sourceTypeName)}}),e._v(" "),a("van-cell",{attrs:{title:"工作城市",value:e._f("DataIsNull")(e.detail.workCityName)}}),e._v(" "),a("van-cell",{attrs:{title:"是否能邀约面试",value:2===e.detail.invited?"否":"是"}}),e._v(" "),a("van-cell",{attrs:{title:"是否添加微信",value:2===e.detail.isAddWechat?"否":"是"}})],1):e._e(),e._v(" "),"{}"==JSON.stringify(e.detail)?a("p",{staticClass:"noMore"},[e._v("\n          暂无信息\n        ")]):e._e()],1):e._e(),e._v(" "),1===e.driverType?a("van-tab",{attrs:{title:"订单"}},[e.clueLog.length?a("van-cell-group",[a("h2",{staticClass:"van-doc-demo-block__title"},[e._v("\n            订单信息\n          ")]),e._v(" "),e._l(e.orderList,function(t){return a("van-cell",{key:t.type,attrs:{title:"订单编号",value:t.orderId+"("+t.stateName+")"}})})],2):e._e(),e._v(" "),e.clueLog.length?e._e():a("p",{staticClass:"noMore"},[e._v("\n          暂无信息\n        ")])],1):e._e(),e._v(" "),1===e.driverType?a("van-tab",{attrs:{title:"线路"}},[e.lineList.length?a("van-cell-group",[a("h2",{staticClass:"van-doc-demo-block__title"},[e._v("\n            线路信息\n          ")]),e._v(" "),e._l(e.lineList,function(t){return a("van-cell",{key:t.type,attrs:{title:"线路编号",value:t.lineId+"("+t.stateName+")"}})})],2):e._e(),e._v(" "),e.lineList.length?e._e():a("p",{staticClass:"noMore"},[e._v("\n          暂无信息\n        ")])],1):e._e(),e._v(" "),2===e.driverType?a("van-tab",{attrs:{title:"跟进"}},["{}"!=JSON.stringify(e.detail)?a("van-cell-group",[a("h2",{staticClass:"van-doc-demo-block__title"},[e._v("\n            跟进信息\n          ")]),e._v(" "),a("van-cell",{attrs:{title:"跟进方式",value:e._f("DataIsNull")(e.detail.wayName)}}),e._v(" "),a("van-cell",{attrs:{title:"跟进情况",value:e._f("DataIsNull")(e.detail.situation)}})],1):e._e(),e._v(" "),"{}"==JSON.stringify(e.detail)?a("p",{staticClass:"noMore"},[e._v("\n          暂无信息\n        ")]):e._e()],1):e._e(),e._v(" "),2===e.driverType?a("van-tab",{attrs:{title:"行为"}},[e.clueLog.length?a("van-cell-group",[a("h2",{staticClass:"van-doc-demo-block__title"},[e._v("\n            行为信息\n          ")]),e._v(" "),e._l(e.clueLog,function(t){return a("van-cell",{key:t.type,attrs:{title:t.operType,value:"("+t.creatorName+")"+t.createDate}})})],2):e._e(),e._v(" "),e.clueLog.length?e._e():a("p",{staticClass:"noMore"},[e._v("\n          暂无信息\n        ")])],1):e._e()],1),e._v(" "),a("van-button",{staticClass:"btn",attrs:{round:"",type:"info",block:""},on:{click:e.checkPush}},[e._v("\n      确认匹配\n    ")])],1)])},[],!1,null,"1843d842",null);e.default=$.exports},"7c93":function(t,e,a){t.exports=a.p+"static/img/wxlogo.5e730287.png"},"8cac":function(t,e,a){},ac1e:function(t,e,a){"use strict";a("68ef"),a("e3b3")},ac2a:function(t,e,n){"use strict";n.r(e);n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("e7e5");var a,i=n("d399"),l=(n("4917"),n("28a5"),n("3b2b"),n("a481"),n("bd86")),r=(n("ac1e"),n("543e")),o=(n("66b9"),n("b650")),c=(n("c3a6"),n("ad06")),s=(n("7f7f"),n("be7f"),n("565f")),u=n("c24f"),d=n("5880");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var f={name:"Login",components:(a={},Object(l.a)(a,s.a.name,s.a),Object(l.a)(a,c.a.name,c.a),Object(l.a)(a,o.a.name,o.a),Object(l.a)(a,r.a.name,r.a),a),data:function(){return{phoneNumber:"wt_admin",password:"123",code:"",loginWay:"password",passwordType:"password",phoneNumberError:"",btnShow:!1}},created:function(){this.getCode()},mounted:function(){},methods:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({getCode:function(){var t=this.getUrlParam("code");null==t||""===t?this.linkGetCode():localStorage.getItem("token")?this.$router.forward():(localStorage.setItem("code",t),this.handleLogin(t))},linkGetCode:function(){var t=window.location.href;window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=ww1350e9d33db61819&redirect_uri="+encodeURIComponent(t)+"&response_type=code&scope=snsapi_base&agentid=1000013&state=state#wechat_redirect"},reLinkGetCode:function(){localStorage.removeItem("code"),this.$router.replace("/login"),this.linkGetCode()},getUrlParam:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.href.split("#")[0].split("?")[1];if(a){var n=a.substr(0).match(e);return null!==n?unescape(n[2]):null}return null},handleLogin:function(t){var a=this;Object(u.g)({code:t,state:"",agentId:"1000013"}).then(function(t){if(t.data.success){i.a.success("授权成功"),localStorage.setItem("token",t.data.data.token);var e=localStorage.getItem("loginUrl");e?(localStorage.removeItem("loginUrl"),a.$router.replace({path:e})):a.$router.replace({path:"/"})}else i.a.fail(t.data.errorMsg),localStorage.removeItem("code"),a.btnShow=!0}).catch(function(t){})}},Object(d.mapActions)({login:"user/login"}))},p=(n("1525"),n("2877")),g=Object(p.a)(f,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("img",{attrs:{src:n("7c93"),alt:""}}),e._v(" "),e.btnShow?e._e():a("div",[a("van-loading"),e._v(" "),a("div",{staticClass:"font"},[e._v("\n      正在连接...\n    ")])],1),e._v(" "),a("div",[e.btnShow?a("van-button",{attrs:{round:"",type:"primary"},on:{click:function(t){return e.reLinkGetCode()}}},[e._v("\n      重新授权\n    ")]):e._e()],1)])},[],!1,null,"1c8dbf0a",null);e.default=g.exports},be95:function(t,e,a){"use strict";var n=a("43dd");a.n(n).a},c3a6:function(t,e,a){"use strict";a("68ef"),a("9d70"),a("3743")},d72c:function(t,e,a){"use strict";var n=a("8cac");a.n(n).a},ef42:function(t,e,a){t.exports=a.p+"static/img/recognition.ecc55c1a.png"}}]);